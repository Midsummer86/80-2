$(function(){var a=function(){var d=$('[name="passwd"]');var b=$('[name="rePassword"]');var c=d.val();var e=b.val();if(_.isEmpty(c)||_.isEmpty(e)){return false}if(c!=e){YoYoValidate.showErr(b,"rePasswordTip");return}YoYoValidate.clearErr(b);return true};$("#aggreementInput").click(function(){var b=$("input[name=aggreement]").is(":checked");if(b){$("#aggreementTip").html("")}else{$("#aggreementTip").html("请确认已阅读用户注册协议")}});$("#registerForm").submit(function(d){d.preventDefault();var c=$("input[name=aggreement]").is(":checked");if(!c){$("#aggreementTip").html("请确认已阅读用户注册协议");return}if(!a()){return}var b=$(this).serializeObject();b.passwd=hex_md5(b.passwd);b.rePassword=hex_md5(b.rePassword);$.postJSON($("#registerForm").attr("action"),b,function(f){if(f.errcode!="0"){if(f.errcode=="200"){YoYoValidate.showErrWithMsg($('[name="user"]'),f.msg)}else{if(f.errcode=="201"){YoYoValidate.showErrWithMsg($('[name="checkCode"]'),f.msg)}else{if(f.errcode=="202"){YoYoValidate.showErrWithMsg($('[name="rePassword"]'),f.msg)}else{YoYoValidate.showErrWithMsg($('[name="user"]'),f.msg)}}}$('[name="checkCode"]').val("");$("#img1").click()}else{var h=$("#registerDiv");var g=6;h.html("<br/><br/><br/><br/><br/><br/><br/>恭喜你注册成功，请到邮箱查看激活邮件，"+g+"秒后到登录页……<br/><br/><br/><br/><br/><br/>");var e=window.setInterval(function(){g--;if(g<=0){window.location.replace($("#registerForm").attr("successUrl"));window.clearInterval(e);return}h.html("<br/><br/><br/><br/><br/><br/><br/>恭喜你注册成功，请到邮箱查看激活邮件，"+g+"秒后到登录页……<br/><br/><br/><br/><br/><br/>")},1000)}})})});